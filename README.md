# ğŸ”® Tháº§y TÃ¡m Phong Thá»§y 2026 - TÆ° Váº¥n Phong Thá»§y Táº¿t áº¤t Tá»µ

Ná»n táº£ng tÆ° váº¥n phong thá»§y chuyÃªn nghiá»‡p cho Táº¿t 2026 (áº¤t Tá»µ) vá»›i cÃ´ng nghá»‡ AI. Xem ngÃ y tá»‘t khai trÆ°Æ¡ng, cÆ°á»›i há»i, Ä‘á»™ng thá»•. Xem tá»­ vi 12 con giÃ¡p nÄƒm Ráº¯n 2026. TÆ° váº¥n phong thá»§y trá»±c tuyáº¿n 24/7.

## ğŸŒ URLs PRODUCTION

- **Production Website**: https://5dacb420.thaytam-phongthuy-v2.pages.dev
- **Custom Domain** (setup pending): https://thaytamphongthuy.com
- **GitHub Repository**: https://github.com/thaytamphongthuy2026-gif/Thay-tam-app1
- **SEO Content Repo**: https://github.com/thaytamphongthuy2026-gif/thaytamphongthuy-lp

## ğŸ”’ NÃ‚NG Cáº¤P Báº¢O Máº¬T PRODUCTION

### âœ… Security Features Implemented

1. **Enhanced JWT Validation**
   - Algorithm verification (ES256/HS256)
   - Expiration check with detailed error messages
   - Issuer & audience validation
   - Role-based access control
   - Future-date token detection

2. **Rate Limiting**
   - 60 requests per minute per user
   - In-memory cache for performance
   - Automatic reset after 60 seconds
   - 429 status with Retry-After header

3. **Input Sanitization**
   - Minimum/maximum length validation
   - XSS attack prevention
   - Script injection detection
   - Event handler blocking

4. **Comprehensive Logging**
   - Timestamped error logs
   - User action tracking
   - API response time monitoring
   - Quota usage analytics

5. **API Security**
   - Environment variable validation
   - Sensitive data masking in responses
   - Cache-Control headers for quota endpoint
   - CORS configuration
   - Content safety filters (Gemini API)

### ğŸ›¡ï¸ Safety Settings

- **HARM_CATEGORY_HARASSMENT**: Block medium and above
- **HARM_CATEGORY_HATE_SPEECH**: Block medium and above
- **HARM_CATEGORY_SEXUALLY_EXPLICIT**: Block medium and above
- **HARM_CATEGORY_DANGEROUS_CONTENT**: Block medium and above

## ğŸ¯ SEO OPTIMIZATION Táº¾T 2026

### âœ… ÄÃ£ HoÃ n ThÃ nh

**Homepage SEO:**
- Keywords: `phong thá»§y 2026`, `táº¿t áº¥t tá»µ`, `xem ngÃ y tá»‘t 2026`, `tá»­ vi nÄƒm ráº¯n`
- Meta tags: title (65 chars), description (155 chars), OG/Twitter cards
- JSON-LD structured data (ProfessionalService schema)
- Canonical URLs
- H1-H3 semantic structure
- SEO-rich content: 12 con giÃ¡p analysis, FAQ section

**Blog Content Marketing:**
- `/blog` page vá»›i 7 bÃ i viáº¿t SEO:
  1. Top 10 NgÃ y Tá»‘t Khai TrÆ°Æ¡ng 2026
  2. Tá»­ Vi 12 Con GiÃ¡p 2026
  3. Phong Thá»§y Táº¿t 2026
  4. Xem NgÃ y CÆ°á»›i Tá»‘t 2026
  5. HÆ°á»›ng NhÃ  Tá»‘t 2026
  6. Tuá»•i Tá»µ Pháº¡m Tuá»•i 2026
  7. MÃ u Sáº¯c May Máº¯n 2026
- Internal linking strategy
- Category badges + reading time

**Technical SEO:**
- `sitemap.xml` (8 pages vá»›i priority)
- `robots.txt` (crawl rules)
- Mobile-optimized
- Page speed: 526KB bundle
- Contact: `thaytamphongthuy2026@gmail.com`

### ğŸ“Š Google Search Console Setup

**BÆ°á»›c 1: Verify Domain (Pending)**
1. VÃ o: https://search.google.com/search-console
2. Chá»n: "Add property" â†’ URL prefix: `https://thaytamphongthuy.com`
3. Verify báº±ng HTML tag hoáº·c DNS TXT record

**BÆ°á»›c 2: Submit Sitemap**
```
Sitemap URL: https://thaytamphongthuy.com/sitemap.xml
```

**BÆ°á»›c 3: Request Indexing**
- Submit homepage: `https://thaytamphongthuy.com/`
- Submit blog page: `https://thaytamphongthuy.com/blog`
- Submit key pages: `/xem-ngay-tot`, `/tu-vi`, `/pricing`

**BÆ°á»›c 4: Monitor (7-14 days)**
- Check "Coverage" report
- Monitor "Performance" (clicks, impressions)
- Fix any errors

### ğŸ¯ Target Keywords (Táº¿t 2026)

| Keyword | Volume | Difficulty | Status |
|---------|--------|------------|--------|
| phong thá»§y 2026 | High | Medium | âœ… Optimized |
| xem ngÃ y tá»‘t 2026 | High | Medium | âœ… Optimized |
| tá»­ vi 2026 | Very High | High | âœ… Optimized |
| táº¿t áº¥t tá»µ 2026 | High | Low | âœ… Optimized |
| ngÃ y hoÃ ng Ä‘áº¡o 2026 | Medium | Medium | âœ… Optimized |
| phong thá»§y táº¿t | High | Medium | âœ… Optimized |
| xem ngÃ y khai trÆ°Æ¡ng | Medium | Low | âœ… Optimized |
| tá»­ vi 12 con giÃ¡p | High | High | âœ… Optimized |

### ğŸ“ˆ Expected SEO Results

**Week 1-2:**
- Google starts crawling sitemap
- Homepage + Blog indexed
- Branded searches appear

**Week 3-4:**
- Long-tail keywords start ranking
- Blog articles indexed
- Social shares increase

**Month 2-3:**
- Top 10 for "phong thá»§y táº¿t 2026"
- Top 20 for "xem ngÃ y tá»‘t 2026"
- Organic traffic: 1000+ visits/month

## ğŸ¯ TÃ­nh nÄƒng

### âœ… ÄÃ£ hoÃ n thÃ nh

- **ÄÄƒng kÃ½/ÄÄƒng nháº­p**: XÃ¡c thá»±c ngÆ°á»i dÃ¹ng vá»›i Supabase Auth
- **Dashboard**: Hiá»ƒn thá»‹ quota vÃ  truy cáº­p nhanh cÃ¡c tÃ­nh nÄƒng
- **TÆ° váº¥n Chat**: Chat trá»±c tiáº¿p vá»›i Tháº§y TÃ¡m (AI) vá» phong thá»§y
- **Xem ngÃ y tá»‘t**: Chá»n ngÃ y phÃ¹ há»£p cho khai trÆ°Æ¡ng, cÆ°á»›i há»i, Ä‘á»™ng thá»•, etc.
- **Xem tá»­ vi**: Dá»± Ä‘oÃ¡n váº­n má»‡nh nÄƒm 2026 dá»±a trÃªn ngÃ y giá» sinh
- **Quáº£n lÃ½ Quota**: Giá»›i háº¡n sá»­ dá»¥ng theo gÃ³i (Free/Pro/Premium)
- **Responsive Design**: Tá»‘i Æ°u cho mobile vÃ  desktop

### ğŸ”„ Äang phÃ¡t triá»ƒn

- **Lá»‹ch phong thá»§y**: Xem lá»‹ch phong thá»§y theo thÃ¡ng
- **Thanh toÃ¡n**: TÃ­ch há»£p VNPay/MoMo
- **Quáº£n lÃ½ Profile**: Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n
- **Chat History**: LÆ°u lá»‹ch sá»­ chat

### ğŸ“ Káº¿ hoáº¡ch tÆ°Æ¡ng lai

- **Xuáº¥t PDF**: Xuáº¥t bÃ¡o cÃ¡o tá»­ vi, ngÃ y tá»‘t dáº¡ng PDF
- **TÆ° váº¥n 1-1**: Äáº·t lá»‹ch tÆ° váº¥n vá»›i chuyÃªn gia tháº­t
- **Admin Dashboard**: Quáº£n lÃ½ ngÆ°á»i dÃ¹ng, Ä‘Æ¡n hÃ ng
- **Email Notification**: ThÃ´ng bÃ¡o qua email

## ğŸ—ï¸ Kiáº¿n trÃºc

```
Frontend: React 18 + TypeScript + Vite + Tailwind CSS v3
Backend: Cloudflare Functions (Serverless Edge Computing)
Database: Supabase PostgreSQL + Row Level Security (RLS)
Auth: Supabase Auth (Email/Password) + JWT ES256
AI: Google Gemini 2.0 Flash (Experimental)
Hosting: Cloudflare Pages (Global CDN)
Security: Rate Limiting + Input Validation + XSS Protection
Analytics: Google Analytics 4 (G-M29T370ZHV)
```

## ğŸ“Š Database Schema

### Table: `users`
- `id` (UUID): User ID (tá»« Supabase Auth)
- `email` (TEXT): Email
- `name` (TEXT): Há» tÃªn
- `plan` (TEXT): GÃ³i dá»‹ch vá»¥ (free/pro/premium)
- `quota` (JSONB): Quota cÃ²n láº¡i `{xemNgay, tuVi, chat}`
- `plan_expiry` (TIMESTAMPTZ): NgÃ y háº¿t háº¡n gÃ³i

### Table: `orders`
- `id` (UUID): Order ID
- `user_id` (UUID): User ID
- `plan` (TEXT): GÃ³i Ä‘Ã£ mua
- `amount` (INTEGER): Sá»‘ tiá»n
- `status` (TEXT): Tráº¡ng thÃ¡i (pending/paid/expired)
- `transaction_id` (TEXT): MÃ£ giao dá»‹ch

## ğŸš€ API Endpoints

### `POST /api/gemini`
**Má»¥c Ä‘Ã­ch**: Gá»i Gemini AI vá»›i kiá»ƒm tra quota vÃ  báº£o máº­t

**Security**:
- âœ… JWT verification (ES256 algorithm)
- âœ… Rate limiting (60 req/min per user)
- âœ… Input sanitization (3-5000 chars, XSS protection)
- âœ… Quota validation before API call
- âœ… Content safety filters

**Headers**:
```
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

**Request Body**:
```json
{
  "prompt": "HÃ´m nay ngÃ y tá»‘t Ä‘á»ƒ khai trÆ°Æ¡ng khÃ´ng?",
  "quotaType": "chat" | "xemNgay" | "tuVi"
}
```

**Success Response** (200):
```json
{
  "success": true,
  "result": "NgÃ y hÃ´m nay ráº¥t tá»‘t Ä‘á»ƒ khai trÆ°Æ¡ng...",
  "remainingQuota": {
    "xemNgay": 2,
    "tuVi": 1,
    "chat": 9
  },
  "metadata": {
    "model": "gemini-2.0-flash-exp",
    "processingTime": 1250,
    "quotaType": "chat"
  }
}
```

**Error Responses**:
- `401`: Missing/invalid token
- `403`: Insufficient quota
- `429`: Rate limit exceeded (60 req/min)
- `400`: Invalid input (XSS detected, length violation)
- `500`: Server error

**Response**:
```json
{
  "success": true,
  "result": "Dá»±a vÃ o lá»‹ch phong thá»§y...",
  "remainingQuota": { "xemNgay": 3, "tuVi": 1, "chat": 9 }
}
```

### `GET /api/quota`
**Má»¥c Ä‘Ã­ch**: Láº¥y thÃ´ng tin quota hiá»‡n táº¡i

**Headers**:
```
Authorization: Bearer <JWT_TOKEN>
```

**Response**:
```json
{
  "success": true,
  "user": { "id": "...", "name": "...", "plan": "free" },
  "quota": { "xemNgay": 3, "tuVi": 1, "chat": 10 }
}
```

## ğŸ’³ GÃ³i dá»‹ch vá»¥

| TÃ­nh nÄƒng | Free | Pro (99k/thÃ¡ng) | Premium (299k/thÃ¡ng) |
|-----------|------|-----------------|----------------------|
| Xem ngÃ y tá»‘t | 3/ngÃ y | 50/ngÃ y | âˆ |
| Xem tá»­ vi | 1/ngÃ y | 10/ngÃ y | âˆ |
| Chat | 10/ngÃ y | 100/ngÃ y | âˆ |
| Lá»‹ch phong thá»§y | âœ“ | âœ“ | VIP |
| Há»— trá»£ | - | Æ¯u tiÃªn | 24/7 |
| TÆ° váº¥n 1-1 | - | - | âœ“ |
| Xuáº¥t PDF | - | - | âœ“ |

## ğŸ”’ Báº£o máº­t

- JWT verification vá»›i `jose` library
- Row Level Security (RLS) trong Supabase
- CORS whitelist
- API keys khÃ´ng expose trong frontend
- Input validation vÃ  sanitization

## ğŸŒ URLs

- **Production**: https://thaytam-phongthuy.pages.dev (sáº½ deploy)
- **GitHub**: https://github.com/thaytamphongthuy2026-gif/thay-tam-app
- **Supabase Project**: https://jnfpxvodlmfukpagozcw.supabase.co

## ğŸ› ï¸ Development

### Prerequisites
- Node.js 18+
- npm hoáº·c yarn
- Supabase account
- Cloudflare account
- Google Gemini API key

### Setup

1. Clone repository:
```bash
git clone https://github.com/thaytamphongthuy2026-gif/thay-tam-app.git
cd thay-tam-app
```

2. Install dependencies:
```bash
npm install
```

3. Táº¡o file `.env`:
```bash
VITE_SUPABASE_URL=https://jnfpxvodlmfukpagozcw.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key
```

4. Táº¡o file `.dev.vars`:
```bash
SUPABASE_URL=https://jnfpxvodlmfukpagozcw.supabase.co
SUPABASE_SERVICE_KEY=your_service_key
SUPABASE_JWT_SECRET=your_jwt_secret
GEMINI_API_KEY=your_gemini_key
```

5. Run development server:
```bash
npm run dev
```

6. Build for production:
```bash
npm run build
```

7. Deploy to Cloudflare Pages:
```bash
npm run deploy
```

## ğŸ“¦ Project Structure

```
webapp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/       # React components
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”œâ”€â”€ pages/            # Page components
â”‚   â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â”œâ”€â”€ Register.tsx
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Chat.tsx
â”‚   â”‚   â”œâ”€â”€ XemNgayTot.tsx
â”‚   â”‚   â”œâ”€â”€ TuVi.tsx
â”‚   â”‚   â””â”€â”€ Pricing.tsx
â”‚   â”œâ”€â”€ lib/              # Utility functions
â”‚   â”‚   â”œâ”€â”€ supabase.ts   # Supabase client
â”‚   â”‚   â”œâ”€â”€ auth.ts       # Auth functions
â”‚   â”‚   â”œâ”€â”€ gemini.ts     # Gemini API calls
â”‚   â”‚   â””â”€â”€ prompts.ts    # AI prompts
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ functions/            # Cloudflare Functions
â”‚   â”œâ”€â”€ _lib/
â”‚   â”‚   â”œâ”€â”€ auth.ts       # JWT verification
â”‚   â”‚   â””â”€â”€ database.ts   # Database queries
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ gemini.ts     # POST /api/gemini
â”‚       â””â”€â”€ quota.ts      # GET /api/quota
â”œâ”€â”€ public/               # Static assets
â”œâ”€â”€ .env                  # Frontend env vars
â”œâ”€â”€ .dev.vars             # Backend env vars (local)
â”œâ”€â”€ wrangler.toml         # Cloudflare config
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ§ª Testing

### Demo Accounts (sau khi táº¡o trong Supabase):
- **Free User**: test@example.com / password123
- **Premium User**: chat@thaytam.com / password123

### Test Flow:
1. ÄÄƒng kÃ½ tÃ i khoáº£n má»›i
2. ÄÄƒng nháº­p
3. Kiá»ƒm tra Dashboard (quota hiá»ƒn thá»‹ Ä‘Ãºng)
4. Chat vá»›i AI (quota giáº£m sau má»—i cÃ¢u há»i)
5. Xem ngÃ y tá»‘t (chá»n ngÃ y vÃ  má»¥c Ä‘Ã­ch)
6. Xem tá»­ vi (nháº­p ngÃ y giá» sinh)

## ğŸ› Known Issues

- [ ] Quota khÃ´ng tá»± reset hÃ ng ngÃ y (cáº§n cron job)
- [ ] Chat history khÃ´ng Ä‘Æ°á»£c lÆ°u
- [ ] ChÆ°a cÃ³ xÃ¡c thá»±c email
- [ ] ChÆ°a tÃ­ch há»£p thanh toÃ¡n thá»±c

## ğŸ“ Changelog

### Version 0.1.0 (2026-01-14)
- âœ… Initial release
- âœ… Táº¥t cáº£ tÃ­nh nÄƒng core (Auth, Chat, Xem NgÃ y, Xem Tá»­ Vi)
- âœ… Quota management
- âœ… Responsive UI
- âœ… Cloudflare Functions backend

## ğŸ‘¥ Contributors

- **AI Developer** - Initial development
- **Product Owner** - Requirements vÃ  testing

## ğŸ“„ License

Copyright Â© 2026 Tháº§y TÃ¡m Phong Thá»§y. All rights reserved.

## ğŸ†˜ Support

Náº¿u gáº·p váº¥n Ä‘á», vui lÃ²ng:
1. Check console logs (F12)
2. Kiá»ƒm tra Supabase logs
3. Xem Cloudflare Functions logs
4. LiÃªn há»‡: contact@thaytam.com
